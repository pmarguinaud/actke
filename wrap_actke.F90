PROGRAM WRAP_ACTKE

#ifdef GPU
#define ATTR_ARG , DEVICE
USE CUDAFOR
#else
#define ATTR_ARG
#endif

IMPLICIT NONE

#include "run_actke.intfb.h"

REAL(KIND=8)   , POINTER :: PSTACK (:,:)
REAL(KIND=8) ATTR_ARG, POINTER :: PSTACK_ALL (:,:)
INTEGER(KIND=4) ATTR_ARG :: NGPBLKS_ALL, KLON_ALL, KSIZE_ALL, KLEV_ALL
INTEGER :: NGPBLKS, KLON, KSIZE, KLEV

NGPBLKS = 10
KLON = 32
KSIZE = 100
KLEV = 10

ALLOCATE (PSTACK_ALL (KSIZE, NGPBLKS))
ALLOCATE (PSTACK(KSIZE, NGPBLKS))

PSTACK = 0.

PSTACK_ALL = PSTACK

KLON_ALL = KLON
NGPBLKS_ALL = NGPBLKS
KSIZE_ALL = KSIZE
KLEV_ALL = KLEV

CALL RUN_ACTKE <<<NGPBLKS, KLON>>> &
&                      (NGPBLKS_ALL, KLON_ALL, KLEV_ALL, KSIZE_ALL, PSTACK_ALL)


PSTACK = PSTACK_ALL

PRINT *, PSTACK (1:30, 1)

END
